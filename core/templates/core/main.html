{% extends 'core/index.html' %}
{% load static %}

{% block title %}
Sign Up!
{% endblock %}

{% block import %}
    <link rel='stylesheet' href="{% static 'css/main.css' %}">
{% endblock %}

{% block main %}
    <h1>Main posts</h1>

    {% if user %}
        {% if user.can_post %}
            <a href='write_post'>Write post</a>
        {% endif %}
    {% else %}
        <a href='signup'>Signup to comment on posts</a>
    {% endif %}

    <hr>

    <div id='posts'>
        {% if posts|length %}
            {% for post in posts %} 
                {% if post.public or post.author == user %}
                    <div id='post'>
                        <p>Written by {{post.author.username}} in {{post.datetime}}</p>

                        {% if not post.public %}
                            <p>This post is private</p>
                        {% endif %}

                        <h1>{{post.title}}</h1>
                        <p>{{post.content}}</p>

                        {% if post.author == user %}
                            <a href='edit/{{post.id}}'>Edit Post</a>
                        {% endif %}
                    </div>
                {% endif %}
            {% endfor %}
        {% else %} 
            <p>There are no posts</p>
        {% endif %} 
    </div>
{% endblock %}

